(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[991],{8317:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/emails",function(){return a(3009)}])},9417:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var r=a(5893),l=a(7294);function t(e){let{type:s,message:a,onClose:t,autoClose:n=!0,autoCloseTime:i=5e3}=e,[d,c]=(0,l.useState)(!0);if((0,l.useEffect)(()=>{if(n&&d){let e=setTimeout(()=>{c(!1),null==t||t()},i);return()=>clearTimeout(e)}},[n,i,d,t]),!d)return null;let o={success:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),error:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),info:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v4a1 1 0 102 0V7zm-1 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}[s];return(0,r.jsx)("div",{className:"border-l-4 p-4 mb-4 rounded ".concat({success:"bg-green-100 border-green-500 text-green-700",error:"bg-red-100 border-red-500 text-red-700",info:"bg-blue-100 border-blue-500 text-blue-700"}[s]),role:"alert",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0 mr-3",children:o}),(0,r.jsx)("div",{className:"flex-grow",children:a}),(0,r.jsxs)("button",{onClick:()=>{c(!1),null==t||t()},className:"ml-auto -mx-1.5 -my-1.5 rounded-lg focus:ring-2 focus:ring-gray-400 p-1.5 inline-flex h-8 w-8 hover:bg-gray-200 hover:bg-opacity-50","aria-label":"Close",children:[(0,r.jsx)("span",{className:"sr-only",children:"Close"}),(0,r.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})})}},2037:function(e,s,a){"use strict";a.d(s,{Z:function(){return d}});var r=a(5893),l=a(9008),t=a.n(l),n=a(1664),i=a.n(n);function d(e){let{children:s,title:a="Amazon Q Developer News",description:l="Subscribe to Amazon Q Developer news and updates"}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t(),{children:[(0,r.jsx)("title",{children:a}),(0,r.jsx)("meta",{name:"description",content:l}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)("header",{className:"bg-amazon-blue text-white py-4",children:(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)(i(),{href:"/",className:"text-xl font-bold flex items-center",children:[(0,r.jsx)("span",{className:"text-amazon-orange mr-1",children:"Amazon"})," Q Developer News"]}),(0,r.jsx)("nav",{children:(0,r.jsxs)("ul",{className:"flex space-x-4",children:[(0,r.jsx)("li",{children:(0,r.jsx)(i(),{href:"/",className:"hover:text-amazon-orange transition-colors",children:"Home"})}),(0,r.jsx)("li",{children:(0,r.jsx)(i(),{href:"/admin",className:"hover:text-amazon-orange transition-colors",children:"Admin"})})]})})]})})}),(0,r.jsx)("main",{className:"flex-grow container mx-auto px-4 py-8",children:s}),(0,r.jsx)("footer",{className:"bg-amazon-blue text-white py-6",children:(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,r.jsx)("div",{className:"mb-4 md:mb-0",children:(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Amazon Web Services, Inc. or its affiliates."]})}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)(i(),{href:"/privacy",className:"hover:text-amazon-orange transition-colors",children:"Privacy Policy"}),(0,r.jsx)(i(),{href:"/terms",className:"hover:text-amazon-orange transition-colors",children:"Terms of Service"})]})]})})})]})]})}},3009:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return d}});var r=a(5893),l=a(7294),t=a(1163),n=a(2037),i=a(9417);function d(){let e=(0,t.useRouter)(),[s,a]=(0,l.useState)(!1),[d,c]=(0,l.useState)([]),[o,m]=(0,l.useState)(null),[x,h]=(0,l.useState)(!0),[u,g]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(!localStorage.getItem("admin-key")){e.push("/admin");return}a(!0),b()},[e]);let b=async()=>{h(!0);try{let e=await fetch("/api/admin/emails",{headers:{"X-Admin-Key":localStorage.getItem("admin-key")||""}});if(e.ok){let s=await e.json();c(s.emails.sort((e,s)=>new Date(s.sentDate).getTime()-new Date(e.sentDate).getTime()))}else g({type:"error",message:"Failed to fetch emails"})}catch(e){g({type:"error",message:"An error occurred while fetching emails"})}finally{h(!1)}},j=e=>new Date(e).toLocaleString(),v=e=>(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full border ".concat({sent:"bg-blue-100 text-blue-800 border-blue-200",delivered:"bg-green-100 text-green-800 border-green-200",bounced:"bg-red-100 text-red-800 border-red-200",complained:"bg-yellow-100 text-yellow-800 border-yellow-200"}[e]),children:e}),f=e=>{m(e)};return s?(0,r.jsx)(n.Z,{title:"Email Simulator | Amazon Q Developer News",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Email Simulator"}),(0,r.jsx)("button",{onClick:()=>e.push("/admin"),className:"px-4 py-2 text-white bg-amazon-blue rounded-md hover:bg-opacity-90 transition-colors",children:"Back to Dashboard"})]}),u&&(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(i.Z,{type:u.type,message:u.message,onClose:()=>g(null)})}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"md:col-span-1 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Sent Emails"}),(0,r.jsx)("button",{onClick:b,className:"p-2 text-amazon-teal hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",title:"Refresh",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),x?(0,r.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-amazon-orange"})}):0===d.length?(0,r.jsx)("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No emails found."}):(0,r.jsx)("div",{className:"overflow-y-auto",style:{maxHeight:"600px"},children:(0,r.jsx)("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:d.map(e=>(0,r.jsx)("li",{children:(0,r.jsxs)("button",{onClick:()=>f(e),className:"w-full text-left p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ".concat((null==o?void 0:o.id)===e.id?"bg-gray-100 dark:bg-gray-700":""),children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"truncate pr-2",children:[(0,r.jsx)("p",{className:"font-medium truncate",children:e.subject}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:["To: ",e.to]})]}),(0,r.jsx)("div",{children:v(e.status)})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:j(e.sentDate)})]})},e.id))})})]}),(0,r.jsxs)("div",{className:"md:col-span-2 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[(0,r.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Email Preview"})}),o?(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"mb-4 pb-4 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[(0,r.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"To:"}),(0,r.jsx)("div",{className:"col-span-2",children:o.to})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[(0,r.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"Subject:"}),(0,r.jsx)("div",{className:"col-span-2 font-medium",children:o.subject})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[(0,r.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"Sent:"}),(0,r.jsx)("div",{className:"col-span-2",children:j(o.sentDate)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,r.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"Status:"}),(0,r.jsx)("div",{className:"col-span-2",children:v(o.status)})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("button",{className:"px-4 py-2 border-b-2 border-amazon-teal font-medium",disabled:!0,children:"HTML"}),(0,r.jsx)("button",{className:"px-4 py-2 text-gray-500 dark:text-gray-400",disabled:!0,children:"Text"})]}),(0,r.jsx)("div",{className:"mt-4 p-4 border border-gray-200 dark:border-gray-700 rounded bg-gray-50 dark:bg-gray-900",children:(0,r.jsx)("div",{className:"prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:o.html}})})]})]}):(0,r.jsx)("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Select an email to preview its content."})]})]})]})}):null}},1163:function(e,s,a){e.exports=a(3079)}},function(e){e.O(0,[996,888,774,179],function(){return e(e.s=8317)}),_N_E=e.O()}]);