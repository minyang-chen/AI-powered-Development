(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[491],{9321:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/subscribers",function(){return r(362)}])},9417:function(e,s,r){"use strict";r.d(s,{Z:function(){return l}});var t=r(5893),a=r(7294);function l(e){let{type:s,message:r,onClose:l,autoClose:n=!0,autoCloseTime:i=5e3}=e,[c,d]=(0,a.useState)(!0);if((0,a.useEffect)(()=>{if(n&&c){let e=setTimeout(()=>{d(!1),null==l||l()},i);return()=>clearTimeout(e)}},[n,i,c,l]),!c)return null;let o={success:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),error:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),info:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v4a1 1 0 102 0V7zm-1 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}[s];return(0,t.jsx)("div",{className:"border-l-4 p-4 mb-4 rounded ".concat({success:"bg-green-100 border-green-500 text-green-700",error:"bg-red-100 border-red-500 text-red-700",info:"bg-blue-100 border-blue-500 text-blue-700"}[s]),role:"alert",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"flex-shrink-0 mr-3",children:o}),(0,t.jsx)("div",{className:"flex-grow",children:r}),(0,t.jsxs)("button",{onClick:()=>{d(!1),null==l||l()},className:"ml-auto -mx-1.5 -my-1.5 rounded-lg focus:ring-2 focus:ring-gray-400 p-1.5 inline-flex h-8 w-8 hover:bg-gray-200 hover:bg-opacity-50","aria-label":"Close",children:[(0,t.jsx)("span",{className:"sr-only",children:"Close"}),(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})})}},2037:function(e,s,r){"use strict";r.d(s,{Z:function(){return c}});var t=r(5893),a=r(9008),l=r.n(a),n=r(1664),i=r.n(n);function c(e){let{children:s,title:r="Amazon Q Developer News",description:a="Subscribe to Amazon Q Developer news and updates"}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l(),{children:[(0,t.jsx)("title",{children:r}),(0,t.jsx)("meta",{name:"description",content:a}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,t.jsx)("header",{className:"bg-amazon-blue text-white py-4",children:(0,t.jsx)("div",{className:"container mx-auto px-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)(i(),{href:"/",className:"text-xl font-bold flex items-center",children:[(0,t.jsx)("span",{className:"text-amazon-orange mr-1",children:"Amazon"})," Q Developer News"]}),(0,t.jsx)("nav",{children:(0,t.jsxs)("ul",{className:"flex space-x-4",children:[(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/",className:"hover:text-amazon-orange transition-colors",children:"Home"})}),(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/admin",className:"hover:text-amazon-orange transition-colors",children:"Admin"})})]})})]})})}),(0,t.jsx)("main",{className:"flex-grow container mx-auto px-4 py-8",children:s}),(0,t.jsx)("footer",{className:"bg-amazon-blue text-white py-6",children:(0,t.jsx)("div",{className:"container mx-auto px-4",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,t.jsx)("div",{className:"mb-4 md:mb-0",children:(0,t.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Amazon Web Services, Inc. or its affiliates."]})}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)(i(),{href:"/privacy",className:"hover:text-amazon-orange transition-colors",children:"Privacy Policy"}),(0,t.jsx)(i(),{href:"/terms",className:"hover:text-amazon-orange transition-colors",children:"Terms of Service"})]})]})})})]})]})}},362:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return c}});var t=r(5893),a=r(7294),l=r(1163),n=r(2037),i=r(9417);function c(){let e=(0,l.useRouter)(),[s,r]=(0,a.useState)(!1),[c,d]=(0,a.useState)([]),[o,x]=(0,a.useState)(!0),[m,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!localStorage.getItem("admin-key")){e.push("/admin");return}r(!0),u()},[e]);let u=async()=>{x(!0);try{let e=await fetch("/api/admin/subscribers",{headers:{"X-Admin-Key":localStorage.getItem("admin-key")||""}});if(e.ok){let s=await e.json();d(s.data.subscribers)}else h({type:"error",message:"Failed to fetch subscribers"})}catch(e){h({type:"error",message:"An error occurred while fetching subscribers"})}finally{x(!1)}},p=e=>e?new Date(e).toLocaleString():"N/A",f=e=>(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full border ".concat({pending:"bg-yellow-100 text-yellow-800 border-yellow-200",confirmed:"bg-green-100 text-green-800 border-green-200",unsubscribed:"bg-red-100 text-red-800 border-red-200"}[e]),children:e});return s?(0,t.jsx)(n.Z,{title:"Manage Subscribers | Amazon Q Developer News",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Manage Subscribers"}),(0,t.jsx)("button",{onClick:()=>e.push("/admin"),className:"px-4 py-2 text-white bg-amazon-blue rounded-md hover:bg-opacity-90 transition-colors",children:"Back to Dashboard"})]}),m&&(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)(i.Z,{type:m.type,message:m.message,onClose:()=>h(null)})}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Subscriber List"}),(0,t.jsxs)("button",{onClick:u,className:"px-4 py-2 text-white bg-amazon-teal rounded-md hover:bg-opacity-90 transition-colors flex items-center",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]}),o?(0,t.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-amazon-orange"})}):0===c.length?(0,t.jsx)("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No subscribers found."}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,t.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Subscription Date"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Confirmation Date"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Last Email Sent"})]})}),(0,t.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:c.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.email}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:f(e.status)}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:p(e.subscriptionDate)}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:p(e.confirmationDate)}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:p(e.lastEmailSentDate)})]},e.email))})]})})]})]})}):null}},1163:function(e,s,r){e.exports=r(3079)}},function(e){e.O(0,[996,888,774,179],function(){return e(e.s=9321)}),_N_E=e.O()}]);