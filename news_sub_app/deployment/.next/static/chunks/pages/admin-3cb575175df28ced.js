(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{4830:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return a(2705)}])},9417:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});var r=a(5893),t=a(7294);function l(e){let{type:s,message:a,onClose:l,autoClose:n=!0,autoCloseTime:i=5e3}=e,[d,c]=(0,t.useState)(!0);if((0,t.useEffect)(()=>{if(n&&d){let e=setTimeout(()=>{c(!1),null==l||l()},i);return()=>clearTimeout(e)}},[n,i,d,l]),!d)return null;let o={success:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),error:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),info:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v4a1 1 0 102 0V7zm-1 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}[s];return(0,r.jsx)("div",{className:"border-l-4 p-4 mb-4 rounded ".concat({success:"bg-green-100 border-green-500 text-green-700",error:"bg-red-100 border-red-500 text-red-700",info:"bg-blue-100 border-blue-500 text-blue-700"}[s]),role:"alert",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0 mr-3",children:o}),(0,r.jsx)("div",{className:"flex-grow",children:a}),(0,r.jsxs)("button",{onClick:()=>{c(!1),null==l||l()},className:"ml-auto -mx-1.5 -my-1.5 rounded-lg focus:ring-2 focus:ring-gray-400 p-1.5 inline-flex h-8 w-8 hover:bg-gray-200 hover:bg-opacity-50","aria-label":"Close",children:[(0,r.jsx)("span",{className:"sr-only",children:"Close"}),(0,r.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})})}},2037:function(e,s,a){"use strict";a.d(s,{Z:function(){return d}});var r=a(5893),t=a(9008),l=a.n(t),n=a(1664),i=a.n(n);function d(e){let{children:s,title:a="Amazon Q Developer News",description:t="Subscribe to Amazon Q Developer news and updates"}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:a}),(0,r.jsx)("meta",{name:"description",content:t}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)("header",{className:"bg-amazon-blue text-white py-4",children:(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)(i(),{href:"/",className:"text-xl font-bold flex items-center",children:[(0,r.jsx)("span",{className:"text-amazon-orange mr-1",children:"Amazon"})," Q Developer News"]}),(0,r.jsx)("nav",{children:(0,r.jsxs)("ul",{className:"flex space-x-4",children:[(0,r.jsx)("li",{children:(0,r.jsx)(i(),{href:"/",className:"hover:text-amazon-orange transition-colors",children:"Home"})}),(0,r.jsx)("li",{children:(0,r.jsx)(i(),{href:"/admin",className:"hover:text-amazon-orange transition-colors",children:"Admin"})})]})})]})})}),(0,r.jsx)("main",{className:"flex-grow container mx-auto px-4 py-8",children:s}),(0,r.jsx)("footer",{className:"bg-amazon-blue text-white py-6",children:(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,r.jsx)("div",{className:"mb-4 md:mb-0",children:(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Amazon Web Services, Inc. or its affiliates."]})}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)(i(),{href:"/privacy",className:"hover:text-amazon-orange transition-colors",children:"Privacy Policy"}),(0,r.jsx)(i(),{href:"/terms",className:"hover:text-amazon-orange transition-colors",children:"Terms of Service"})]})]})})})]})]})}},2705:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return c}});var r=a(5893),t=a(7294),l=a(2037),n=a(9417),i=a(1664),d=a.n(i);function c(){let[e,s]=(0,t.useState)(!1),[a,i]=(0,t.useState)(""),[c,o]=(0,t.useState)(null),[m,x]=(0,t.useState)(null),h=async e=>{if(e.preventDefault(),!a){x({type:"error",message:"Admin key is required"});return}try{(await fetch("/api/admin/stats",{headers:{"X-Admin-Key":a}})).ok?(s(!0),localStorage.setItem("admin-key",a),u()):x({type:"error",message:"Invalid admin key"})}catch(e){x({type:"error",message:"An error occurred during authentication"})}},u=async()=>{try{let e=await fetch("/api/admin/stats",{headers:{"X-Admin-Key":a||localStorage.getItem("admin-key")||""}});if(e.ok){let s=await e.json();o(s.stats)}else x({type:"error",message:"Failed to fetch stats"})}catch(e){x({type:"error",message:"An error occurred while fetching stats"})}};return(0,t.useEffect)(()=>{let e=localStorage.getItem("admin-key");e&&(i(e),s(!0),u())},[]),(0,r.jsx)(l.Z,{title:"Admin Dashboard | Amazon Q Developer News",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Admin Dashboard"}),m&&(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(n.Z,{type:m.type,message:m.message,onClose:()=>x(null)})}),e?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Subscriber Statistics"}),c?(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg text-center",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Subscribers"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-amazon-blue",children:c.total})]}),(0,r.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg text-center",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Subscribers"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-green-600",children:c.active})]}),(0,r.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg text-center",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending Confirmation"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:c.pending})]}),(0,r.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg text-center",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Unsubscribed"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-red-600",children:c.unsubscribed})]})]}):(0,r.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-amazon-orange"})}),c&&(0,r.jsxs)("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:["Last updated: ",new Date(c.lastUpdated).toLocaleString()]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)(d(),{href:"/admin/subscribers",className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Manage Subscribers"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"View and manage your subscriber list"})]}),(0,r.jsxs)(d(),{href:"/admin/emails",className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Email Simulator"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"View simulated emails sent by the system"})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsx)("button",{onClick:u,className:"px-4 py-2 text-white bg-amazon-teal rounded-md hover:bg-opacity-90 transition-colors",children:"Refresh Stats"}),(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("admin-key"),s(!1),i("")},className:"px-4 py-2 text-white bg-red-600 rounded-md hover:bg-opacity-90 transition-colors",children:"Logout"})]})]})]}):(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Admin Login"}),(0,r.jsxs)("form",{onSubmit:h,children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"adminKey",className:"block mb-2",children:"Admin Key"}),(0,r.jsx)("input",{type:"password",id:"adminKey",value:a,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-amazon-teal",placeholder:"Enter admin key"})]}),(0,r.jsx)("button",{type:"submit",className:"px-6 py-2 text-white bg-amazon-blue rounded-md hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-amazon-blue focus:ring-opacity-50 transition-colors",children:"Login"}),(0,r.jsx)("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:'For local testing, use: "local-admin-key"'})]})]})]})})}}},function(e){e.O(0,[996,888,774,179],function(){return e(e.s=4830)}),_N_E=e.O()}]);